<DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Display a map</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
<% include ../partials/header.ejs %>
<style>
	body { margin: 0; padding: 0; }
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>

  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.js"></script>
<link
rel="stylesheet"
href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.css"
type="text/css"
/>


<div id="map"></div>
<script toiletx=<%= toiletx %> toilety=<%= toilety %>>
	// TO MAKE THE MAP APPEAR YOU MUST
	// ADD YOUR ACCESS TOKEN FROM
	// https://account.mapbox.com
	mapboxgl.accessToken = 'pk.eyJ1IjoidXNtYW4xMzMiLCJhIjoiY2tlNjhsZmZyMGdjdjJ4bjVjbGx3ZGdvdSJ9.OxvZ-RKG-0opT8Z_LRUMmQ';
var map = new mapboxgl.Map({
container: 'map', // container id
style: 'mapbox://styles/mapbox/streets-v11', // style URL
center: [175.6111760, -40.3562240], // starting position [lng, lat]
zoom: 13 // starting zoom
});

var toiletx = document.currentScript.getAttribute('toiletx')
var toilety = document.currentScript.getAttribute('toilety')
// var toilets = JSON.parse(document.currentScript.getAttribute('toilets'))
// console.log(toilets)

var marker = new mapboxgl.Marker()
.setLngLat([175.6111760, -40.3562240])
.addTo(map);

var marker = new mapboxgl.Marker()
.setLngLat([toiletx, toilety])
.addTo(map);
 
map.addControl(
new MapboxDirections({
accessToken: mapboxgl.accessToken
}),
'top-left'
);

// Add geolocate control to the map.
map.addControl(
new mapboxgl.GeolocateControl({
positionOptions: {
enableHighAccuracy: true
},
trackUserLocation: true
})
);

</script>



</body>
</html>


